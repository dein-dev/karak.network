(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{94474:function(e,t,n){Promise.resolve().then(n.bind(n,5076)),Promise.resolve().then(n.bind(n,97281)),Promise.resolve().then(n.bind(n,37213)),Promise.resolve().then(n.t.bind(n,75119,23)),Promise.resolve().then(n.t.bind(n,57010,23)),Promise.resolve().then(n.t.bind(n,52069,23)),Promise.resolve().then(n.t.bind(n,91555,23)),Promise.resolve().then(n.t.bind(n,55517,23))},17015:function(e,t,n){"use strict";n.d(t,{d:function(){return h},h:function(){return u}});var a=n(95660),r=n(42966),i=n(80945),s=n(27153),l=n(68305),o=n(98770),c=n(42692),d=n(81773);async function u(e){let t=await (0,a.x)(i.vc),n=(0,r.u)(i.vc);if(!t||!n)throw Error("wallet client or public client is still missing");let u=(0,s.uN)({abi:l.F.abi,address:e.vaultSupervisor,client:{wallet:t,public:n}}),h=await u.write.gimmieShares([e.vaultAddress,e.amountToClaim]);await n.waitForTransactionReceipt({confirmations:1,hash:h}),o.Y.info("Successfully withdrew receipt tokens from vault:",h);let m=(0,c.F)(e.chain,h);d.ZP.success("Successfully withdrew ".concat(e.tokenSymbol," receipt tokens!$").concat(m.string()))}async function h(e,t){let n=await (0,a.x)(i.vc),u=(0,r.u)(i.vc);if(!n||!u)throw Error("wallet client or public client is still missing");let h=(0,s.uN)({abi:l.ah.abi,address:t.address,client:n});if(await h.read.allowance([n.account.address,t.vaultSupervisor])<e){let n=await h.write.approve([t.vaultSupervisor,e]);o.Y.info("Approve tx hash for returning receipt tokens:",n);let a=await u.waitForTransactionReceipt({hash:n});o.Y.info("Approve tx confirmed for returning receipt tokens - tx receipt hash:",a.transactionHash)}let m=(0,s.uN)({abi:l.F.abi,address:t.vaultSupervisor,client:{wallet:n,public:u}}),f=await m.write.returnShares([t.address,e]),p=await u.waitForTransactionReceipt({confirmations:1,hash:f});o.Y.info("Successfully returned receipt tokens to vault:",p.transactionHash);let x=(0,c.F)(t.chain,f);d.ZP.success("Successfully returned ".concat(t.tokenSymbol," receipt tokens!$").concat(x.string()))}},97281:function(e,t,n){"use strict";n.r(t),n.d(t,{ConnectButton:function(){return A}});var a=n(72339),r=n(56484),i=n(1873),s=n(38066),l=n(54919),o=n(31817),c=n(80945),d=n(95660),u=n(94577),h=n(76601),m=n(4885);async function f(e,t){let n;let{account:a,connector:r,...i}=t;return n="object"==typeof a&&"local"===a.type?e.getClient():await (0,m.e)(e,{account:a,connector:r}),(0,h.s)(n,u.l,"signMessage")({...i,...a?{account:a}:{}})}var p=n(98770),x=n(99494),v=n(82870),w=n(78292),g=n(33768),b=n(29025),k=n(67534),j=n(21145),y=n(85629),N=n(19693),S=n(88465),_=n(81773),C=n(14056),B=n(61382),q=n(17015);let z=e=>{let{item:t}=e,[n,i]=(0,r.useState)(),{address:o,chain:c}=(0,l.m)(),{switchChainAsync:d}=(0,C.o)(),u=(0,r.useCallback)(async e=>{if(o&&c&&e.vaultAddress!==B.D)try{i(!0),c.id!==e.chain.id&&await d({chainId:e.chain.id}),await (0,q.h)(e),i(!1)}catch(t){i(void 0),p.Y.error("Error claiming ".concat(e.tokenSymbol," receipt tokens:"),t),_.ZP.error("Error claiming ".concat(e.tokenSymbol," receipt tokens"))}},[o,c,t,d]);return(0,a.jsxs)("div",{className:"flex justify-between bg-white shadow-md rounded-md",children:[(0,a.jsx)("p",{className:"text-lg px-4 py-3",children:(0,s._l)(t.tokenAddress)}),(0,a.jsxs)("button",{disabled:!o||n,onClick:()=>u(t),className:"ml-auto px-2 bg-gradient-to-r from-orange-600 to-orange-300 rounded-tr-md rounded-br-md font-semibold hover:brightness-75 text-white text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[void 0===n&&(0,a.jsxs)(a.Fragment,{children:["Claim"," ",(0,s.RF)((0,s.lv)(t.amountToClaim.toString(),t.tokenDecimals))," ","tokens"]}),!1===n&&"Claimed!",n&&"Claiming..."]})]})};var E=n(46300),T=n(67483),F=n(15445);let P=()=>{let[e,t]=(0,r.useState)(!1),{userBalancesInfo:n}=(0,N.j)(),i=(0,E.S2)(),s=(0,r.useMemo)(()=>n.tokenBalancesInfo.filter(e=>S.km.some(t=>t.vaultAddress===e.vaultAddress&&t.chainId===e.chainId)&&e.withdrawingBalance===BigInt(0)&&e.nonTokenizedBalance>BigInt(0)||S.km.some(t=>t.vaultAddress===e.vaultAddress&&t.chainId===e.chainId)&&e.withdrawingBalance>0&&e.nonTokenizedBalance-e.withdrawingBalance>0).map(e=>{let t=i.flatMap(t=>T.w.from(t.vaults.find(t=>t.address===e.vaultAddress)));return t.isNone()?null:{vaultSupervisor:t.map(e=>e.vaultSupervisor).getOrElse(()=>B.D),vaultAddress:e.vaultAddress,tokenAddress:e.tokenAddress,tokenSymbol:t.map(e=>e.tokenSymbol).getOrElse(String),tokenDecimals:e.tokenDecimals,amountToClaim:e.withdrawingBalance===BigInt(0)?e.nonTokenizedBalance:e.nonTokenizedBalance-e.withdrawingBalance,chain:t.map(e=>e.chain).getOrElse(()=>F.R)}}).filter(e=>null!==e),[i,n]);return(0,a.jsx)("div",{children:s.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:"bg-gradient-to-r from-orange-600 to-orange-300 text-white hover:brightness-95 py-2 px-4 rounded font-nunito font-bold disabled:cursor-not-allowed disabled:opacity-50",onClick:()=>t(!0),children:"Claim Receipt Tokens"}),(0,a.jsxs)(k.V,{open:e,onClose:()=>t(!1),className:"relative z-50",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,a.jsx)("div",{className:"fixed inset-0 flex w-screen items-center justify-center p-4",children:(0,a.jsxs)(k.V.Panel,{className:"m-auto rounded-md bg-white shadow-lg sm:w-[500px] p-8",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)("p",{className:"text-black text-2xl",children:"Receipt Tokens"}),(0,a.jsx)("div",{className:"ml-2 mt-[0.15rem]",children:(0,a.jsx)(y.e,{text:"Receipt tokens for you to claim",dark:!0})}),(0,a.jsxs)("button",{type:"button",className:"text-black bg-transparent hover:opacity-75 rounded-lg text-sm w-8 h-8 ml-auto","data-modal-hide":"default-modal",onClick:()=>t(!1),children:[(0,a.jsx)("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:(0,a.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),(0,a.jsx)("span",{className:"sr-only",children:"Close modal"})]})]}),(0,a.jsx)("div",{className:"flex flex-col gap-6 mt-10",children:s.map((e,t)=>(0,a.jsx)(z,{item:e},t))})]})}),(0,a.jsx)(j.J,{})]})]})})},A=()=>{let{referralCode:e}=(0,v.d)(),{verifiedUser:t,refresh:n}=(0,w.x)(),[u,h]=(0,r.useState)(),{address:m}=(0,l.m)(),k=(0,r.useCallback)(async()=>{if(!(0,s.xb)(e)&&m&&!t)try{let t,a;h(!0);let{walletDraftId:r,message:i}=await o.S.startRegisterWallet.mutate({referralCode:e});for(let e of[(0,g.v)({chain:c.qm,transport:(0,b.d)(c.qm.rpcUrls.default.http[0])}),(0,g.v)({chain:c.JH,transport:(0,b.d)(c.JH.rpcUrls.default.http[0])}),(0,g.v)({chain:c.T4,transport:(0,b.d)(c.T4.rpcUrls.default.http[0])}),(0,g.v)({chain:c.Zd,transport:(0,b.d)(c.Zd.rpcUrls.default.http[0])}),(0,g.v)({chain:c.mx,transport:(0,b.d)(c.mx.rpcUrls.default.http[0])})])if(await e.getBytecode({address:m})){let n=await (0,d.x)(c.vc,{chainId:e.chain.id});t=await n.signMessage({message:i}),a=e.chain.id;break}t||(t=await f(c.vc,{message:i})),await o.S.finishRegisterWallet.mutate({wallet:m,walletDraftId:r,signature:t,multisigChainId:a}),h(!1),n()}catch(e){h(void 0),p.Y.error("Error during signing wallet flow:",e)}},[e,m,n,t]);return(0,a.jsx)(i.x3.Custom,{children:n=>{let{isConnected:r,show:i,truncatedAddress:l,ensName:o}=n;return r?r&&!t?(0,a.jsx)("button",{disabled:(0,s.xb)(e)||!0===u,className:"bg-primary-orange text-white hover:brightness-75 py-2 px-4 rounded font-nunito font-bold disabled:cursor-not-allowed disabled:opacity-50",onClick:k,children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[u&&(0,a.jsx)(x.$,{}),u?"Signing":"Sign your wallet"]})}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(P,{}),(0,a.jsx)("button",{disabled:!0!==t,className:"bg-white shadow-md text-light-black hover:brightness-95 py-2 px-4 rounded font-nunito font-bold disabled:cursor-not-allowed disabled:opacity-50",onClick:i,children:null!=o?o:l})]}):(0,a.jsx)("button",{className:"bg-primary-orange text-white hover:brightness-75 py-2 px-4 rounded font-nunito font-bold disabled:cursor-not-allowed disabled:opacity-50",onClick:i,children:"Connect Wallet"})}})}},99494:function(e,t,n){"use strict";n.d(t,{$:function(){return r}});var a=n(72339);let r=()=>(0,a.jsx)("svg",{width:"20",height:"20",fill:"currentColor",className:"animate-spin h-5 w-5",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M526 1394q0 53-37.5 90.5t-90.5 37.5q-52 0-90-38t-38-90q0-53 37.5-90.5t90.5-37.5 90.5 37.5 37.5 90.5zm498 206q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-704-704q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm1202 498q0 52-38 90t-90 38q-53 0-90.5-37.5t-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-964-996q0 66-47 113t-113 47-113-47-47-113 47-113 113-47 113 47 47 113zm1170 498q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-640-704q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm530 206q0 93-66 158.5t-158 65.5q-93 0-158.5-65.5t-65.5-158.5q0-92 65.5-158t158.5-66q92 0 158 66t66 158z"})})},85629:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var a=n(72339);let r=e=>{let{text:t,dark:n,long:r,small:i}=e;return(0,a.jsxs)("span",{className:"group relative z-30",children:[(0,a.jsx)("div",{className:"absolute top-[calc(100%+0.5rem)] left-[50%] -translate-x-[50%] hidden group-hover:block ".concat(r?"w-[20rem]":"w-auto"),children:(0,a.jsx)("div",{className:"top-full right-0 rounded bg-black px-4 py-2 text-sm text-white text-center ".concat(r?"whitespace-normal":"whitespace-nowrap"),children:t})}),(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"".concat(i?"w-5 h-5":"w-6 h-6"," ").concat(n?"text-light-black":"text-gray-100"),children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"})})]})}},95196:function(e,t,n){"use strict";n.d(t,{N:function(){return o},j:function(){return c}});var a=n(72339),r=n(56484),i=n(88465),s=n(98770);let l=r.createContext({isBlocked:!1});function o(){return(0,r.useContext)(l)}let c=e=>{let{children:t}=e,[n,o]=(0,r.useState)({isBlocked:!1});return(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("https://ipapi.co/json/"),t=(await e.json()).country_name;o({isBlocked:i.gw.includes(t)})}catch(e){s.Y.error("Error fetching user ip-related data:",e),o({isBlocked:!1})}})()},[]),(0,a.jsx)(l.Provider,{value:n,children:t})}},37213:function(e,t,n){"use strict";n.r(t),n.d(t,{Providers:function(){return d}});var a=n(72339),r=n(80945),i=n(46300),s=n(19693),l=n(82870),o=n(78292),c=n(95196);function d(e){let{children:t}=e;return(0,a.jsx)(r.Qg,{children:(0,a.jsx)(i.YY,{children:(0,a.jsx)(s.f,{children:(0,a.jsx)(l.T,{children:(0,a.jsx)(o.U,{children:(0,a.jsx)(c.j,{children:t})})})})})})}},82870:function(e,t,n){"use strict";n.d(t,{T:function(){return o},d:function(){return l}});var a=n(72339),r=n(56484);let i=(e,t)=>{let[n,a]=(0,r.useState)("");return(0,r.useEffect)(()=>{let n=localStorage.getItem(e);n&&"undefined"!==n?a(JSON.parse(n)):a(t)},[]),(0,r.useEffect)(()=>{localStorage.setItem(e,JSON.stringify(n))},[e,n]),[n,a]},s=(0,r.createContext)({referralCode:"",setReferralCode:()=>{}}),l=()=>(0,r.useContext)(s),o=e=>{let{children:t}=e,[n,r]=i("karak-restaking-referral","");return(0,a.jsx)(s.Provider,{value:{referralCode:n,setReferralCode:r},children:t})}},42692:function(e,t,n){"use strict";n.d(t,{F:function(){return r}});var a=n(67483);function r(e,t){var n;return a.w.from(null===(n=e.blockExplorers)||void 0===n?void 0:n.default).map(e=>"".concat(e.url,"/tx/").concat(t,"$").concat(e.name))}},75119:function(){},5076:function(e,t,n){"use strict";n.r(t),t.default={src:"/_next/static/media/logo.0118a22d.svg",height:35,width:30,blurWidth:0,blurHeight:0}},55517:function(e){e.exports={style:{fontFamily:"'__Inter_aaf875', '__Inter_Fallback_aaf875'",fontStyle:"normal"},className:"__className_aaf875",variable:"__variable_aaf875"}},91555:function(e){e.exports={style:{fontFamily:"'__gilroy_efadc0', '__gilroy_Fallback_efadc0'"},className:"__className_efadc0",variable:"__variable_efadc0"}}},function(e){e.O(0,[414,636,806,804,727,480,280,802,744],function(){return e(e.s=94474)}),_N_E=e.O()}]);